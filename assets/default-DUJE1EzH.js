import{p as A,G as Y,s as w,c as m,a0 as j,w as p,o as q,b as D,j as O,q as F,E as G,u as J,H as Z,y as I,J as W,L as r,M as R,d as K,a1 as Q,f as ee,a2 as te,k as ae,l as oe,n as le,a3 as ne,x as se,B as re,a4 as ue,a5 as ie,a6 as ce,a7 as de,a8 as ve,a9 as me,aa as ge,ab as fe,ac as X,R as he,S as be,ad as Se,ae as ye,U as Ve,W as _,X as h,O as C,Y as k,af as L,ag as T,ah as ke,_ as $,Z as U,$ as P,ai as H,aj as N,ak as we,al as Be,am as xe}from"./index-Bo9cogQG.js";import{m as pe,V as z}from"./VToolbar-DzMS1WQe.js";import{u as _e,V as Ce,a as Le}from"./VList-BvDOxC4Q.js";import{V as Te}from"./VMain-BeeC7p_a.js";import{V as Ie}from"./VContainer-DnCipf3-.js";import{V as Pe}from"./VMenu-BvYW-_qg.js";import"./VDivider-s51XwqY5.js";const He=A({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ne(e){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:a}=u;let b=0,c=0;const t=Y(null),d=w(0),i=w(0),S=w(0),g=w(!1),o=w(!1),v=m(()=>Number(e.scrollThreshold)),n=m(()=>j((v.value-d.value)/v.value||0)),y=()=>{const s=t.value;if(!s||a&&!a.value)return;b=d.value,d.value="window"in s?s.pageYOffset:s.scrollTop;const f=s instanceof Window?document.documentElement.scrollHeight:s.scrollHeight;if(c!==f){c=f;return}o.value=d.value<b,S.value=Math.abs(d.value-v.value)};return p(o,()=>{i.value=i.value||d.value}),p(g,()=>{i.value=0}),q(()=>{p(()=>e.scrollTarget,s=>{var V;const f=s?document.querySelector(s):window;f&&f!==t.value&&((V=t.value)==null||V.removeEventListener("scroll",y),t.value=f,t.value.addEventListener("scroll",y,{passive:!0}))},{immediate:!0})}),D(()=>{var s;(s=t.value)==null||s.removeEventListener("scroll",y)}),a&&p(a,y,{immediate:!0}),{scrollThreshold:v,currentScroll:d,currentThreshold:S,isScrollActive:g,scrollRatio:n,isScrollingUp:o,savedScroll:i}}const Re=A({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...pe(),...O(),...He(),height:{type:[Number,String],default:64}},"VAppBar"),Ae=F()({name:"VAppBar",props:Re(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:a}=u;const b=Y(),c=G(e,"modelValue"),t=m(()=>{var B;const l=new Set(((B=e.scrollBehavior)==null?void 0:B.split(" "))??[]);return{hide:l.has("hide"),fullyHide:l.has("fully-hide"),inverted:l.has("inverted"),collapse:l.has("collapse"),elevate:l.has("elevate"),fadeImage:l.has("fade-image")}}),d=m(()=>{const l=t.value;return l.hide||l.fullyHide||l.inverted||l.collapse||l.elevate||l.fadeImage||!c.value}),{currentScroll:i,scrollThreshold:S,isScrollingUp:g,scrollRatio:o}=Ne(e,{canScroll:d}),v=m(()=>t.value.hide||t.value.fullyHide),n=m(()=>e.collapse||t.value.collapse&&(t.value.inverted?o.value>0:o.value===0)),y=m(()=>e.flat||t.value.fullyHide&&!c.value||t.value.elevate&&(t.value.inverted?i.value>0:i.value===0)),s=m(()=>t.value.fadeImage?t.value.inverted?1-o.value:o.value:void 0),f=m(()=>{var E,M;if(t.value.hide&&t.value.inverted)return 0;const l=((E=b.value)==null?void 0:E.contentHeight)??0,B=((M=b.value)==null?void 0:M.extensionHeight)??0;return v.value?i.value<S.value||t.value.fullyHide?l+B:l:l+B});J(m(()=>!!e.scrollBehavior),()=>{K(()=>{v.value?t.value.inverted?c.value=i.value>S.value:c.value=g.value||i.value<S.value:c.value=!0})});const{ssrBootStyles:V}=_e(),{layoutItemStyles:x}=Z({id:e.name,order:m(()=>parseInt(e.order,10)),position:I(e,"location"),layoutSize:f,elementSize:w(void 0),active:c,absolute:I(e,"absolute")});return W(()=>{const l=z.filterProps(e);return r(z,R({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...x.value,"--v-toolbar-image-opacity":s.value,height:void 0,...V.value},e.style]},l,{collapse:n.value,flat:y.value}),a)}),{}}}),Ee=A({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Q,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...ee(),...te({location:"top end"}),...ae(),...oe(),...le(),...ne({transition:"scale-rotate-transition"})},"VBadge"),Me=F()({name:"VBadge",inheritAttrs:!1,props:Ee(),setup(e,u){const{backgroundColorClasses:a,backgroundColorStyles:b}=se(I(e,"color")),{roundedClasses:c}=re(e),{t}=ue(),{textColorClasses:d,textColorStyles:i}=ie(I(e,"textColor")),{themeClasses:S}=ce(),{locationStyles:g}=de(e,!0,o=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(o)?+(e.offsetY??0):["left","right"].includes(o)?+(e.offsetX??0):0));return W(()=>{const o=Number(e.content),v=!e.max||isNaN(o)?e.content:o<=+e.max?o:`${e.max}+`,[n,y]=ve(u.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return r(e.tag,R({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},y,{style:e.style}),{default:()=>{var s,f;return[r("div",{class:"v-badge__wrapper"},[(f=(s=u.slots).default)==null?void 0:f.call(s),r(me,{transition:e.transition},{default:()=>{var V,x;return[ge(r("span",R({class:["v-badge__badge",S.value,a.value,c.value,d.value],style:[b.value,i.value,e.inline?{}:g.value],"aria-atomic":"true","aria-label":t(e.label,o),"aria-live":"polite",role:"status"},n),[e.dot?void 0:u.slots.badge?(x=(V=u.slots).badge)==null?void 0:x.call(V):e.icon?r(X,{icon:e.icon},null):v]),[[fe,e.modelValue]])]}})])]}})}),{}}}),je={__name:"default",setup(e){const{t:u}=he(),a=be(),{apiAuth:b}=xe(),c=Se(),t=ye(),d=m(()=>[{to:"/register",text:u("nav.register"),icon:"mdi-account-plus",show:!a.isLoggedIn},{to:"/login",text:u("nav.login"),icon:"mdi-account-arrow-left",show:!a.isLoggedIn},{to:"/cart",text:u("nav.cart"),icon:"mdi-cart",show:a.isLoggedIn},{to:"/orders",text:u("nav.orders"),icon:"mdi-format-list-bulleted",show:a.isLoggedIn},{to:"/admin",text:u("nav.admin"),icon:"mdi-cog",show:a.isLoggedIn&&a.isAdmin},{to:"/tarot",text:u("nav.tarot"),icon:"shopping_cart",show:!a.isLoggedIn}]),i=[{text:"繁體中文",value:"zhHant"},{text:"English",value:"en"}],S=async()=>{try{await b.delete("/user/logout")}catch(g){console.log(g)}a.logout(),c({text:u("logout.success"),snackbarProps:{color:"green"}}),t.push("/")};return(g,o)=>{const v=Ve("router-view");return k(),_(C,null,[r(Ae,null,{default:h(()=>[r(Ie,{class:"d-flex align-center"},{default:h(()=>[r(L,{to:"/",active:!1},{default:h(()=>o[0]||(o[0]=[T("購物網站")])),_:1}),r(ke),(k(!0),_(C,null,$(d.value,n=>(k(),_(C,{key:n.to},[n.show?(k(),P(L,{key:0,to:n.to,"prepend-icon":n.icon},{default:h(()=>[T(H(n.text)+" ",1),n.to==="/cart"?(k(),P(Me,{key:0,content:U(a).cart,floating:"",color:"red"},null,8,["content"])):N("",!0)]),_:2},1032,["to","prepend-icon"])):N("",!0)],64))),128)),U(a).isLoggedIn?(k(),P(L,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:S},{default:h(()=>[T(H(g.$t("nav.logout")),1)]),_:1})):N("",!0),r(Pe,null,{activator:h(({props:n})=>[r(L,we(Be(n)),{default:h(()=>[r(X,{icon:"mdi-translate"})]),_:2},1040)]),default:h(()=>[r(Ce,null,{default:h(()=>[(k(),_(C,null,$(i,n=>r(Le,{key:n.value,onClick:y=>g.$i18n.locale=n.value},{default:h(()=>[T(H(n.text),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),r(Te,null,{default:h(()=>[r(v)]),_:1})],64)}}};export{je as default};
