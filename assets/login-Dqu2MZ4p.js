import{$ as B,h as D,u as F,a0 as N,a1 as H,a as j,o as z,g as K,w as O,a2 as s,e as o,aC as q,a6 as n,R as l,bK as u,a4 as C,bH as G,aa as J}from"./index-DMTp5kGh.js";import{c as T,a as d,f as Q,u as V,e as c}from"./index.esm-DhCMYYHJ.js";import{v as $}from"./index-D3kSr7n5.js";import{b as _}from"./route-block-B_A1xBdJ.js";import{V as W}from"./VContainer-zh8Ww08_.js";const X={class:"form-container sign-up"},Y=["disabled"],Z=["placeholder","error-message"],ee=["placeholder","error-message"],se=["placeholder","error-message"],oe=["error-messages","placeholder"],ae=["loading"],re={class:"form-container sign-in"},te=["disabled"],ne=["placeholder","error-messages"],ie=["placeholder","error-messages"],le={class:"text-center"},ue=["loading"],de={class:"toggle-container"},ce={class:"toggle"},pe={class:"toggle-panel toggle-left"},me={class:"toggle-panel toggle-right"},M={__name:"login",setup(ge){const g=D(!1),{t:r}=F(),{api:S}=J(),p=N(),y=H(),R=j(),A=()=>{g.value=!g.value},x=T({account:d().required(r("api.userAccountRequired")).min(4,r("api.userAccountTooShort")).max(20,r("api.userAccountTooLong")).test("isAlphanumeric",r("api.userAccountInvalid"),e=>$.isAlphanumeric(e)),password:d().required(r("api.userPasswordRequired")).min(4,r("api.userPasswordTooShort")).max(20,r("api.userPasswordTooLong"))}),E=T({accountUser:d().required(r("api.userAccountRequired")).min(4,r("api.userAccountTooShort")).max(20,r("api.userAccountTooLong")).test("isAlphanumeric",r("api.userAccountInvalid"),e=>$.isAlphanumeric(e)),emailUser:d().required(r("api.userEmailRequired")).test("isEmail",r("api.userEmailInvalid"),e=>$.isEmail(e)),passwordUser:d().required(r("api.userPasswordRequired")).min(4,r("api.userPasswordTooShort")).max(20,r("api.userPasswordTooLong")),passwordConfirm:d().oneOf([Q("passwordUser")],r("api.userPasswordNotMatch"))}),{handleSubmit:I,isSubmitting:m}=V({validationSchema:x}),h=c("account"),v=c("password"),{handleSubmit:L,isSubmitting:he}=V({validationSchema:E}),w=c("accountUser"),b=c("emailUser"),f=c("passwordUser"),U=c("passwordConfirm"),k=I(async e=>{var a,t;try{const{data:i}=await S.post("/user/login",{account:e.account,password:e.password});R.login(i.result),p({text:r("login.success"),snackbarProps:{color:"green"}}),y.push("/")}catch(i){p({text:r("api."+(((t=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:t.message)||"unknownError")),snackbarProps:{color:"red"}})}}),P=L(async e=>{var a,t;try{await S.post("/user",{account:e.accountUser,email:e.emailUser,password:e.passwordUser}),p({text:r("register.success"),snackbarProps:{color:"green"}}),y.push("/login")}catch(i){p({text:r("api."+(((t=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:t.message)||"unknownError")),snackbarProps:{color:"red"}})}console.log(11111)});return(e,a)=>(z(),K(W,{class:"d-flex align-center justify-center",style:{"min-height":"100vh"}},{default:O(()=>[s("div",{class:G(["container",{active:g.value}])},[s("div",X,[s("form",{disabled:o(m),onSubmit:a[4]||(a[4]=q((...t)=>o(P)&&o(P)(...t),["prevent"]))},[s("h1",null,n(e.$t("register.submit")),1),s("span",null,n(e.$t("register.text")),1),l(s("input",{type:"text",placeholder:e.$t("login.account"),"error-message":o(w).errorMessage.value,"onUpdate:modelValue":a[0]||(a[0]=t=>o(w).value.value=t),minlength:"4",maxlength:"20"},null,8,Z),[[u,o(w).value.value]]),l(s("input",{type:"email",placeholder:e.$t("user.email"),"onUpdate:modelValue":a[1]||(a[1]=t=>o(b).value.value=t),"error-message":o(b).errorMessage.value},null,8,ee),[[u,o(b).value.value]]),l(s("input",{type:"password",placeholder:e.$t("login.password"),"error-message":o(f).errorMessage.value,"onUpdate:modelValue":a[2]||(a[2]=t=>o(f).value.value=t),minlength:"4",maxlength:"20",counter:""},null,8,se),[[u,o(f).value.value]]),l(s("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>o(U).value.value=t),type:"password","error-messages":o(U).errorMessage.value,placeholder:e.$t("user.passwordConfirm"),minlength:"4",maxlength:"20",counter:""},null,8,oe),[[u,o(U).value.value]]),s("button",{loading:o(m),type:"submitUser"},n(e.$t("register.submit")),9,ae)],40,Y)]),s("div",re,[s("form",{disabled:o(m),onSubmit:a[7]||(a[7]=q((...t)=>o(k)&&o(k)(...t),["prevent"]))},[s("h1",null,n(e.$t("nav.login")),1),s("span",null,n(e.$t("login.login")),1),l(s("input",{placeholder:e.$t("login.account"),"onUpdate:modelValue":a[5]||(a[5]=t=>o(h).value.value=t),"error-messages":o(h).errorMessage.value,minlength:"4",maxlength:"20",counter:""},null,8,ne),[[u,o(h).value.value]]),l(s("input",{placeholder:e.$t("login.password"),"onUpdate:modelValue":a[6]||(a[6]=t=>o(v).value.value=t),type:"password","error-messages":o(v).errorMessage.value,minlength:"4",maxlength:"20",counter:""},null,8,ie),[[u,o(v).value.value]]),s("div",le,[s("button",{loading:o(m),type:"submit",color:"primary"},n(e.$t("nav.login")),9,ue)])],40,te)]),s("div",de,[s("div",ce,[s("div",pe,[s("h1",null,[C(n(e.$t("login.welcome")),1),a[8]||(a[8]=s("br",null,null,-1)),C(n(e.$t("login.to")),1)]),s("p",null,n(e.$t("login.ID")),1),s("button",{onClick:A,class:"hidden"},n(e.$t("nav.login")),1)]),s("div",me,[s("h1",null,n(e.$t("register.Hi")),1),s("p",null,n(e.$t("register.ext")),1),s("button",{onClick:A,class:"hidden"},n(e.$t("register.submit")),1)])])])],2)]),_:1}))}};typeof _=="function"&&_(M);const $e=B(M,[["__scopeId","data-v-6bbf9218"]]);export{$e as default};
